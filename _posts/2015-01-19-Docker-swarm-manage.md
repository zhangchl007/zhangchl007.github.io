----
-layout: post
-title: Install and Create a Docker swarm cluster
-tag: Docker
----
-
-It is the screen snapshot from my laptop , so easy with docker-machine
-<pre><code>
-
-docker@docker01:~$ docker run swarm create
-Unable to find image 'swarm:latest' locally
-latest: Pulling from library/swarm
-
-2bc79aec8ea0: Pull complete 
-dc2fb86a875a: Pull complete 
-435e648d0f23: Pull complete 
-e16042a92d05: Pull complete 
-045bd7b00b5b: Pull complete 
-3caea1253d76: Pull complete 
-2b4c55187a27: Pull complete 
-6b40fe7724bd: Pull complete 
-Digest: sha256:51a30269d3f3aaa04f744280e3c118aea032f6df85b49819aee29d379ac313b5
-Status: Downloaded newer image for swarm:latest
-85558240c5f00e704d04ba34da1bb26d
-docker@docker01:~$ exit[root@oc3053148748 ~]# docker-machine create \
->         -d virtualbox \
->         --swarm \
->         --swarm-master \
->         --swarm-discovery token://<TOKEN-FROM-ABOVE> \
-> ^C
-[root@oc3053148748 ~]# docker-machine create \
->         -d virtualbox \
->         --swarm \
->         --swarm-master \
->         --swarm-discovery token://85558240c5f00e704d04ba34da1bb26d \
->         swarm-master
-Running pre-create checks...
-Creating machine...
-(swarm-master) OUT | Creating VirtualBox VM...
-(swarm-master) OUT | Creating SSH key...
-(swarm-master) OUT | Starting VirtualBox VM...
-(swarm-master) OUT | Starting VM...
-Waiting for machine to be running, this may take a few minutes...
-Machine is running, waiting for SSH to be available...
-Detecting operating system of created instance...
-Detecting the provisioner...
-Provisioning created instance...
-Copying certs to the local machine directory...
-Copying certs to the remote machine...
-Setting Docker configuration on the remote daemon...
-Configuring swarm...
-To see how to connect Docker to this machine, run: docker-machine env swarm-master
-[root@oc3053148748 ~]# docker-machine create \
->     -d virtualbox \
->     --swarm \
->     --swarm-discovery token://85558240c5f00e704d04ba34da1bb26d \
->     swarm-agent-01
-Running pre-create checks...
-Creating machine...
-(swarm-agent-01) OUT | Creating VirtualBox VM...
-(swarm-agent-01) OUT | Creating SSH key...
-(swarm-agent-01) OUT | Starting VirtualBox VM...
-(swarm-agent-01) OUT | Starting VM...
-Waiting for machine to be running, this may take a few minutes...
-Machine is running, waiting for SSH to be available...
-Detecting operating system of created instance...
-Detecting the provisioner...
-Provisioning created instance...
-Copying certs to the local machine directory...
-Copying certs to the remote machine...
-Setting Docker configuration on the remote daemon...
-Configuring swarm...
-To see how to connect Docker to this machine, run: docker-machine env swarm-agent-01
-[root@oc3053148748 ~]# docker-machine create \
->     -d virtualbox \
->     --swarm \
->     --swarm-discovery token://85558240c5f00e704d04ba34da1bb26d \
->     swarm-agent-02
-Running pre-create checks...
-Creating machine...
-(swarm-agent-02) OUT | Creating VirtualBox VM...
-(swarm-agent-02) OUT | Creating SSH key...
-(swarm-agent-02) OUT | Starting VirtualBox VM...
-(swarm-agent-02) OUT | Starting VM...
-Waiting for machine to be running, this may take a few minutes...
-Machine is running, waiting for SSH to be available...
-Detecting operating system of created instance...
-Detecting the provisioner...
-Provisioning created instance...
-Copying certs to the local machine directory...
-Copying certs to the remote machine...
-Setting Docker configuration on the remote daemon...
-Configuring swarm...
-To see how to connect Docker to this machine, run: docker-machine env swarm-agent-02
-
-ot@oc3053148748 ~]# docker-machine ls
-NAME             ACTIVE   DRIVER       STATE     URL                         SWARM
-docker01         -        virtualbox   Running   tcp://192.168.99.100:2376   
-swarm-agent-01   -        virtualbox   Running   tcp://192.168.99.102:2376   swarm-master
-swarm-agent-02   -        virtualbox   Running   tcp://192.168.99.103:2376   swarm-master
-swarm-master     -        virtualbox   Running   tcp://192.168.99.101:2376   swarm-master (master)
-[root@oc3053148748 ~]# docker-login swarm-master
-                        ##         .
-                  ## ## ##        ==
-               ## ## ## ## ##    ===
-           /"""""""""""""""""\___/ ===
-      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~
-           \______ o           __/
-             \    \         __/
-              \____\_______/
- _                 _   ____     _            _
-| |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __
-| '_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '__|
-| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   <  __/ |
-|_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|
-Boot2Docker version 1.9.1, build master : cef800b - Fri Nov 20 19:33:59 UTC 2015
-Docker version 1.9.1, build a34a1d5
-docker@swarm-master:~$ docker run swarm list token://85558240c5f00e704d04ba34da1bb26d
-192.168.99.102:2376
-192.168.99.101:2376
-192.168.99.103:2376
-
-<pre></code>
